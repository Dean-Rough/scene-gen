{"ast":null,"code":"var _jsxFileName = \"/Users/deannewton/Projects/Scene-Gen/frontend/src/components/DesignCanvas.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport { Stage, Layer, Image as KonvaImage, Text, Transformer } from 'react-konva';\nimport useImage from 'use-image';\n\n// Component for background floorplan image\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst FloorplanImage = ({\n  src\n}) => {\n  _s();\n  const [image] = useImage(src);\n  return image ? /*#__PURE__*/_jsxDEV(KonvaImage, {\n    image: image,\n    width: 800,\n    height: 600,\n    listening: false\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 18\n  }, this) : null;\n};\n\n// Component for asset elements with drag, scale, rotate capabilities\n_s(FloorplanImage, \"7iHFm+4ZQcY3NOZmuC1Wyv6gdJ4=\", false, function () {\n  return [useImage];\n});\n_c = FloorplanImage;\nconst AssetElement = ({\n  element,\n  isSelected,\n  onSelect,\n  onTransform\n}) => {\n  _s2();\n  const [image] = useImage(element.asset_image_url);\n  const elementRef = useRef();\n  const transformerRef = useRef();\n  React.useEffect(() => {\n    if (isSelected && transformerRef.current && elementRef.current) {\n      transformerRef.current.nodes([elementRef.current]);\n      transformerRef.current.getLayer().batchDraw();\n    }\n  }, [isSelected]);\n  const handleDragEnd = e => {\n    const node = e.target;\n    onTransform(element.id, {\n      positionX: node.x(),\n      positionY: node.y(),\n      scaleX: node.scaleX(),\n      scaleY: node.scaleY(),\n      rotation: node.rotation()\n    });\n  };\n  const handleTransformEnd = () => {\n    const node = elementRef.current;\n    if (node) {\n      onTransform(element.id, {\n        positionX: node.x(),\n        positionY: node.y(),\n        scaleX: node.scaleX(),\n        scaleY: node.scaleY(),\n        rotation: node.rotation()\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [image && /*#__PURE__*/_jsxDEV(KonvaImage, {\n      ref: elementRef,\n      image: image,\n      x: element.position_x || 50,\n      y: element.position_y || 50,\n      width: 80,\n      height: 80,\n      scaleX: element.scale_x || 1,\n      scaleY: element.scale_y || 1,\n      rotation: element.rotation_z || 0,\n      draggable: true,\n      onClick: onSelect,\n      onTap: onSelect,\n      onDragEnd: handleDragEnd,\n      onTransformEnd: handleTransformEnd\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this), isSelected && /*#__PURE__*/_jsxDEV(Transformer, {\n      ref: transformerRef,\n      boundBoxFunc: (oldBox, newBox) => {\n        // Limit minimum size\n        if (newBox.width < 20 || newBox.height < 20) {\n          return oldBox;\n        }\n        return newBox;\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n_s2(AssetElement, \"Gzxcn+Q9mDLvrkSM1q38ccAUNP0=\", false, function () {\n  return [useImage];\n});\n_c2 = AssetElement;\nconst DesignCanvas = ({\n  floorplanUrl,\n  selectedAsset,\n  sceneElements,\n  onElementPlace,\n  onElementMove,\n  onElementDelete\n}) => {\n  _s3();\n  const stageRef = useRef();\n  const [canvasDimensions] = useState({\n    width: 800,\n    height: 600\n  });\n  const [selectedElementId, setSelectedElementId] = useState(null);\n  const handleStageClick = e => {\n    if (e.target === e.target.getStage()) {\n      if (selectedAsset) {\n        // Place new asset\n        const pos = e.target.getStage().getPointerPosition();\n        onElementPlace({\n          assetId: selectedAsset.id,\n          positionX: pos.x,\n          positionY: pos.y,\n          rotationZ: 0,\n          scaleX: 1,\n          scaleY: 1\n        });\n      } else {\n        // Deselect any selected element\n        setSelectedElementId(null);\n      }\n    }\n  };\n  const handleElementSelect = elementId => {\n    setSelectedElementId(elementId);\n  };\n  const handleElementTransform = (elementId, transformData) => {\n    // Update element in real-time for smooth UX\n    onElementMove(elementId, transformData);\n  };\n  const handleDeleteElement = () => {\n    if (selectedElementId && onElementDelete) {\n      onElementDelete(selectedElementId);\n      setSelectedElementId(null);\n    }\n  };\n\n  // Keyboard event handling\n  React.useEffect(() => {\n    const handleKeyDown = e => {\n      if (e.key === 'Delete' && selectedElementId) {\n        handleDeleteElement();\n      } else if (e.key === 'Escape') {\n        setSelectedElementId(null);\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [selectedElementId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"design-canvas\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"canvas-container\",\n      style: {\n        border: '2px solid #007bff',\n        borderRadius: '8px',\n        overflow: 'hidden',\n        backgroundColor: '#f8f9fa'\n      },\n      children: /*#__PURE__*/_jsxDEV(Stage, {\n        ref: stageRef,\n        width: canvasDimensions.width,\n        height: canvasDimensions.height,\n        onClick: handleStageClick,\n        onTap: handleStageClick,\n        children: /*#__PURE__*/_jsxDEV(Layer, {\n          children: [floorplanUrl && /*#__PURE__*/_jsxDEV(FloorplanImage, {\n            src: floorplanUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 30\n          }, this), !floorplanUrl && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [Array.from({\n              length: Math.ceil(canvasDimensions.width / 50)\n            }, (_, i) => /*#__PURE__*/_jsxDEV(Text, {\n              x: i * 50,\n              y: 0,\n              width: 1,\n              height: canvasDimensions.height,\n              fill: \"#e0e0e0\"\n            }, `grid-v-${i}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 19\n            }, this)), Array.from({\n              length: Math.ceil(canvasDimensions.height / 50)\n            }, (_, i) => /*#__PURE__*/_jsxDEV(Text, {\n              x: 0,\n              y: i * 50,\n              width: canvasDimensions.width,\n              height: 1,\n              fill: \"#e0e0e0\"\n            }, `grid-h-${i}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true), sceneElements.map(element => /*#__PURE__*/_jsxDEV(AssetElement, {\n            element: element,\n            isSelected: selectedElementId === element.id,\n            onSelect: () => handleElementSelect(element.id),\n            onTransform: handleElementTransform\n          }, element.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"canvas-controls\",\n      style: {\n        marginTop: '15px',\n        padding: '15px',\n        backgroundColor: '#f8f9fa',\n        borderRadius: '8px',\n        border: '1px solid #dee2e6'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: '0',\n              fontSize: '14px',\n              color: '#495057',\n              fontWeight: '500'\n            },\n            children: selectedAsset ? `üéØ Click to place: ${selectedAsset.type}` : 'üìö Select an asset from the library to place it'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), sceneElements.length > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: '5px 0 0 0',\n              fontSize: '12px',\n              color: '#6c757d'\n            },\n            children: [\"\\uD83D\\uDCCD Assets placed: \", sceneElements.length, \" | \", selectedElementId ? '‚úèÔ∏è Selected - drag, scale, rotate, or press Delete' : 'üëÜ Click elements to select']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this), selectedElementId && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '10px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleDeleteElement,\n            style: {\n              padding: '5px 10px',\n              fontSize: '12px',\n              backgroundColor: '#dc3545',\n              color: 'white',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: 'pointer'\n            },\n            children: \"\\uD83D\\uDDD1\\uFE0F Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setSelectedElementId(null),\n            style: {\n              padding: '5px 10px',\n              fontSize: '12px',\n              backgroundColor: '#6c757d',\n              color: 'white',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: 'pointer'\n            },\n            children: \"Deselect\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n};\n_s3(DesignCanvas, \"M3/a0MGZ12pNbWjD1GiOVziXU3A=\");\n_c3 = DesignCanvas;\nexport default DesignCanvas;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"FloorplanImage\");\n$RefreshReg$(_c2, \"AssetElement\");\n$RefreshReg$(_c3, \"DesignCanvas\");","map":{"version":3,"names":["React","useState","useRef","Stage","Layer","Image","KonvaImage","Text","Transformer","useImage","jsxDEV","_jsxDEV","Fragment","_Fragment","FloorplanImage","src","_s","image","width","height","listening","fileName","_jsxFileName","lineNumber","columnNumber","_c","AssetElement","element","isSelected","onSelect","onTransform","_s2","asset_image_url","elementRef","transformerRef","useEffect","current","nodes","getLayer","batchDraw","handleDragEnd","e","node","target","id","positionX","x","positionY","y","scaleX","scaleY","rotation","handleTransformEnd","children","ref","position_x","position_y","scale_x","scale_y","rotation_z","draggable","onClick","onTap","onDragEnd","onTransformEnd","boundBoxFunc","oldBox","newBox","_c2","DesignCanvas","floorplanUrl","selectedAsset","sceneElements","onElementPlace","onElementMove","onElementDelete","_s3","stageRef","canvasDimensions","selectedElementId","setSelectedElementId","handleStageClick","getStage","pos","getPointerPosition","assetId","rotationZ","handleElementSelect","elementId","handleElementTransform","transformData","handleDeleteElement","handleKeyDown","key","window","addEventListener","removeEventListener","className","style","border","borderRadius","overflow","backgroundColor","Array","from","length","Math","ceil","_","i","fill","map","marginTop","padding","display","justifyContent","alignItems","margin","fontSize","color","fontWeight","type","gap","cursor","_c3","$RefreshReg$"],"sources":["/Users/deannewton/Projects/Scene-Gen/frontend/src/components/DesignCanvas.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { Stage, Layer, Image as KonvaImage, Text, Transformer } from 'react-konva';\nimport useImage from 'use-image';\n\n// Component for background floorplan image\nconst FloorplanImage = ({ src }) => {\n  const [image] = useImage(src);\n  return image ? <KonvaImage image={image} width={800} height={600} listening={false} /> : null;\n};\n\n// Component for asset elements with drag, scale, rotate capabilities\nconst AssetElement = ({ element, isSelected, onSelect, onTransform }) => {\n  const [image] = useImage(element.asset_image_url);\n  const elementRef = useRef();\n  const transformerRef = useRef();\n\n  React.useEffect(() => {\n    if (isSelected && transformerRef.current && elementRef.current) {\n      transformerRef.current.nodes([elementRef.current]);\n      transformerRef.current.getLayer().batchDraw();\n    }\n  }, [isSelected]);\n\n  const handleDragEnd = (e) => {\n    const node = e.target;\n    onTransform(element.id, {\n      positionX: node.x(),\n      positionY: node.y(),\n      scaleX: node.scaleX(),\n      scaleY: node.scaleY(),\n      rotation: node.rotation()\n    });\n  };\n\n  const handleTransformEnd = () => {\n    const node = elementRef.current;\n    if (node) {\n      onTransform(element.id, {\n        positionX: node.x(),\n        positionY: node.y(),\n        scaleX: node.scaleX(),\n        scaleY: node.scaleY(),\n        rotation: node.rotation()\n      });\n    }\n  };\n\n  return (\n    <>\n      {image && (\n        <KonvaImage\n          ref={elementRef}\n          image={image}\n          x={element.position_x || 50}\n          y={element.position_y || 50}\n          width={80}\n          height={80}\n          scaleX={element.scale_x || 1}\n          scaleY={element.scale_y || 1}\n          rotation={element.rotation_z || 0}\n          draggable\n          onClick={onSelect}\n          onTap={onSelect}\n          onDragEnd={handleDragEnd}\n          onTransformEnd={handleTransformEnd}\n        />\n      )}\n      {isSelected && (\n        <Transformer\n          ref={transformerRef}\n          boundBoxFunc={(oldBox, newBox) => {\n            // Limit minimum size\n            if (newBox.width < 20 || newBox.height < 20) {\n              return oldBox;\n            }\n            return newBox;\n          }}\n        />\n      )}\n    </>\n  );\n};\n\nconst DesignCanvas = ({ \n  floorplanUrl, \n  selectedAsset, \n  sceneElements, \n  onElementPlace,\n  onElementMove,\n  onElementDelete \n}) => {\n  const stageRef = useRef();\n  const [canvasDimensions] = useState({ width: 800, height: 600 });\n  const [selectedElementId, setSelectedElementId] = useState(null);\n\n  const handleStageClick = (e) => {\n    if (e.target === e.target.getStage()) {\n      if (selectedAsset) {\n        // Place new asset\n        const pos = e.target.getStage().getPointerPosition();\n        onElementPlace({\n          assetId: selectedAsset.id,\n          positionX: pos.x,\n          positionY: pos.y,\n          rotationZ: 0,\n          scaleX: 1,\n          scaleY: 1\n        });\n      } else {\n        // Deselect any selected element\n        setSelectedElementId(null);\n      }\n    }\n  };\n\n  const handleElementSelect = (elementId) => {\n    setSelectedElementId(elementId);\n  };\n\n  const handleElementTransform = (elementId, transformData) => {\n    // Update element in real-time for smooth UX\n    onElementMove(elementId, transformData);\n  };\n\n  const handleDeleteElement = () => {\n    if (selectedElementId && onElementDelete) {\n      onElementDelete(selectedElementId);\n      setSelectedElementId(null);\n    }\n  };\n\n  // Keyboard event handling\n  React.useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (e.key === 'Delete' && selectedElementId) {\n        handleDeleteElement();\n      } else if (e.key === 'Escape') {\n        setSelectedElementId(null);\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [selectedElementId]);\n\n  return (\n    <div className=\"design-canvas\">\n      <div className=\"canvas-container\" style={{ \n        border: '2px solid #007bff', \n        borderRadius: '8px',\n        overflow: 'hidden',\n        backgroundColor: '#f8f9fa'\n      }}>\n        <Stage\n          ref={stageRef}\n          width={canvasDimensions.width}\n          height={canvasDimensions.height}\n          onClick={handleStageClick}\n          onTap={handleStageClick}\n        >\n          <Layer>\n            {/* Background floorplan */}\n            {floorplanUrl && <FloorplanImage src={floorplanUrl} />}\n            \n            {/* Grid background when no floorplan */}\n            {!floorplanUrl && (\n              <>\n                {Array.from({ length: Math.ceil(canvasDimensions.width / 50) }, (_, i) => (\n                  <Text\n                    key={`grid-v-${i}`}\n                    x={i * 50}\n                    y={0}\n                    width={1}\n                    height={canvasDimensions.height}\n                    fill=\"#e0e0e0\"\n                  />\n                ))}\n                {Array.from({ length: Math.ceil(canvasDimensions.height / 50) }, (_, i) => (\n                  <Text\n                    key={`grid-h-${i}`}\n                    x={0}\n                    y={i * 50}\n                    width={canvasDimensions.width}\n                    height={1}\n                    fill=\"#e0e0e0\"\n                  />\n                ))}\n              </>\n            )}\n            \n            {/* Placed scene elements */}\n            {sceneElements.map((element) => (\n              <AssetElement\n                key={element.id}\n                element={element}\n                isSelected={selectedElementId === element.id}\n                onSelect={() => handleElementSelect(element.id)}\n                onTransform={handleElementTransform}\n              />\n            ))}\n          </Layer>\n        </Stage>\n      </div>\n      \n      <div className=\"canvas-controls\" style={{ \n        marginTop: '15px', \n        padding: '15px', \n        backgroundColor: '#f8f9fa', \n        borderRadius: '8px',\n        border: '1px solid #dee2e6'\n      }}>\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n          <div>\n            <p style={{ margin: '0', fontSize: '14px', color: '#495057', fontWeight: '500' }}>\n              {selectedAsset \n                ? `üéØ Click to place: ${selectedAsset.type}` \n                : 'üìö Select an asset from the library to place it'\n              }\n            </p>\n            {sceneElements.length > 0 && (\n              <p style={{ margin: '5px 0 0 0', fontSize: '12px', color: '#6c757d' }}>\n                üìç Assets placed: {sceneElements.length} | {selectedElementId ? '‚úèÔ∏è Selected - drag, scale, rotate, or press Delete' : 'üëÜ Click elements to select'}\n              </p>\n            )}\n          </div>\n          {selectedElementId && (\n            <div style={{ display: 'flex', gap: '10px' }}>\n              <button\n                onClick={handleDeleteElement}\n                style={{\n                  padding: '5px 10px',\n                  fontSize: '12px',\n                  backgroundColor: '#dc3545',\n                  color: 'white',\n                  border: 'none',\n                  borderRadius: '4px',\n                  cursor: 'pointer'\n                }}\n              >\n                üóëÔ∏è Delete\n              </button>\n              <button\n                onClick={() => setSelectedElementId(null)}\n                style={{\n                  padding: '5px 10px',\n                  fontSize: '12px',\n                  backgroundColor: '#6c757d',\n                  color: 'white',\n                  border: 'none',\n                  borderRadius: '4px',\n                  cursor: 'pointer'\n                }}\n              >\n                Deselect\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DesignCanvas;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}